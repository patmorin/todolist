#!/bin/bash -ex

n=1000000
epsilons="0.69 0.68 0.67 0.66 0.65 0.64 0.63 0.62 0.61 0.6 0.59 0.58 0.57 0.56 0.55 0.54 0.53 0.52 0.51 0.5 0.49 0.48 0.47 0.46 0.45 0.44 0.43 0.42 0.41 0.4 0.39 0.38 0.37 0.36 0.35 0.34 0.33 0.32 0.31 0.3 0.29 0.28 0.27 0.26 0.25 0.24 0.23 0.22 0.21 0.2 0.19 0.18 0.17 0.16 0.15 0.14 0.13 0.12 0.11 0.1 0.09 0.08 0.07 0.06 0.05 0.04 0.03 0.02"

ns="25000 50000 75000 100000 125000 150000 175000 200000 225000 250000 275000 300000 325000 350000 375000 400000 425000 450000 475000 500000 525000 550000 575000 600000 625000 650000 675000 700000 725000 750000 775000 800000 825000 850000 875000 900000 925000 950000 975000 1000000 1025000 1050000 1075000 1100000 1125000 1150000 1175000 1200000 1225000 1250000 1275000 1300000 1325000 1350000 1375000 1400000 1425000 1450000 1475000 1500000 1525000 1550000 1575000 1600000 1625000 1650000 1675000 1700000 1725000 1750000 1775000 1800000 1825000 1850000 1875000 1900000 1925000 1950000 1975000 2000000"

structs="todolist2 skiplist redblack treap scapegoat"
eps=0.2

for n in $ns; do
    for d in $structs; do
        ../cpp-bin/main -eps=$eps -$n -$d > tmp.dat
        grep 'ADD' tmp.dat >> $d-add.dat
        grep 'FIND' tmp.dat >> $d-find.dat
    done
done

